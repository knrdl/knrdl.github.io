<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta http-equiv=Content-Security-Policy content="default-src 'none'; style-src 'self' 'unsafe-inline'; img-src 'self' https:; font-src 'self'; script-src 'unsafe-inline'"><link rel="shortcut icon" type=image/png href=/favicon.png><link rel=sitemap type=application/xml href=/sitemap.xml title=knrdlog><title>Generate encrypted 7zip files</title>
<meta name=description content="notes to self"><meta property="og:title" content="Generate encrypted 7zip files"><meta property="og:description" content='Using 7zip files as encrypted backups is a quick and dirty workaround for a proper backup solution.
First generate a strong password, e.g.: pwgen -1sB 128
Backup without compression 7z a -mx=0 -mhe=on -m0=Copy -p"$PASSWORD" TARGET.7z SOURCE_FOLDERS_*
mx=0 and m0=Copy mean: just copy the files, do not compress them
mhe=on means: also encrypt the 7z headers, so the password is also required for listing the file tree
Backup with compression 7z a -mx=3 -mhe=on -ms=on -p"$PASSWORD" TARGET.'><meta property="og:type" content="article"><meta property="og:url" content="https://knrdl.github.io/posts/encrypted-7zip-files/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-02-13T00:00:00+00:00"><meta property="article:modified_time" content="2024-02-13T20:00:33+01:00"><meta name=author content="knrdl"><link rel=stylesheet href=https://knrdl.github.io/styles.min.b1eb305989f01c7be31a7a19d4ab34ca470eddd06327253c7bcf3d1c5a41d28c.css integrity="sha256-seswWYnwHHvjGnoZ1Ks0ykcO3dBjJyU8e889HFpB0ow="></head><body><header><div class=site-header><span><a href=https://knrdl.github.io/ class=site-title>knrdlog</a>
</span><span><nav class=right-menu><span class=menu-item><a href=/tags/>tags</a></span>
<span class=menu-item><a href=https://github.com/knrdl target=_blank rel="noopener noreferrer">github</a></span>
<span class=menu-item><a href=/index.xml>rss</a></span></nav></span></div><div class=separator>================================================================================================================================================================</div></header><main><article><div class=post-header><h1>Generate encrypted 7zip files</h1><time datetime=2024-02-13 class=pubdate>2024-02-13</time>
<span class=tags><a href=/tags/bash class=hashtag>bash</a>
<a href=/tags/zip class=hashtag>zip</a></span></div><p>Using 7zip files as encrypted backups is a quick and dirty workaround for a proper backup solution.</p><p>First generate a <strong>strong</strong> password, e.g.: <code>pwgen -1sB 128</code></p><h2 id=backup-without-compression class=paragraph-header>Backup without compression <a href=#backup-without-compression></a></h2><p><code>7z a -mx=0 -mhe=on -m0=Copy -p"$PASSWORD" TARGET.7z SOURCE_FOLDERS_*</code></p><ul><li><p><code>mx=0</code> and <code>m0=Copy</code> mean: just copy the files, do not compress them</p></li><li><p><code>mhe=on</code> means: also encrypt the 7z headers, so the password is also required for listing the file tree</p></li></ul><h2 id=backup-with-compression class=paragraph-header>Backup with compression <a href=#backup-with-compression></a></h2><p><code>7z a -mx=3 -mhe=on -ms=on -p"$PASSWORD" TARGET.7z SOURCE_FOLDERS_*</code></p><ul><li><code>ms=on</code> treats everything as a single file (find duplicates)</li></ul><h2 id=check-the-archive-file class=paragraph-header>Check the archive file <a href=#check-the-archive-file></a></h2><p><code>7z l -slt -p"$PASSWORD" TARGET.7z</code></p><ul><li><code>7zAES:19</code> means secure AES-256 encryption (plus some password hashing, see
<a href=https://sourceforge.net/p/p7zip/patches/25/#3da5 target=_blank rel="noopener noreferrer">here</a>).</li></ul><div class=comments><a href="https://github.com/knrdl/knrdl.github.io/issues/new?title=Generate+encrypted+7zip+files" target=_blank rel="noopener noreferrer"><img src=https://knrdl.github.io/github.png alt="Github logo" style=filter:invert(.7) width=17 height=17>
<span>Feedback</span></a></div></article></main><hr><footer>Licensed under <a href=https://creativecommons.org/publicdomain/zero/1.0/ target=_blank rel='noopener norefferer'>CC0 1.0</a> |
<a href=https://gohugo.io target=_blank rel='noopener norefferer'>Hugo</a> theme inspired by <a href=https://github.com/vamc19 target=_blank rel='noopener norefferer'>vamc19</a> |
Hosted by <a href=https://pages.github.com target=_blank rel='noopener norefferer'>Github</a> (<a href=https://github.com/site/privacy target=_blank rel='noopener norefferer'>Privacy Policy</a>)</footer></body></html>