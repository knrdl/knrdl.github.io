<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><meta http-equiv=Content-Security-Policy content="default-src 'none'; style-src 'self' 'unsafe-inline'; img-src 'self' https:; font-src 'self'; script-src 'unsafe-inline'"><link rel="shortcut icon" type=image/png href=/favicon.png><link rel=sitemap type=application/xml href=/sitemap.xml title=knrdlog><title>Minimal setup for a rootless Podman host</title><meta name=description content="notes to self"><meta property="og:url" content="https://knrdl.github.io/posts/minimal-podman-setup/"><meta property="og:site_name" content="knrdlog"><meta property="og:title" content="Minimal setup for a rootless Podman host"><meta property="og:description" content="Install Podman sudo apt install podman podman-compose Compose can be called as podman-compose with autocomplete.
Allow binding to privileged ports (<1024) echo &#34;net.ipv4.ip_unprivileged_port_start=1&#34; > /etc/sysctl.d/100-podman.conf /usr/sbin/sysctl --system # apply setting Start containers after reboot without user login loginctl enable-linger $USER Pull images from Docker Hub without explicit docker.io prefix Add to ~/.config/containers/registries.conf:
unqualified-search-registries = [&#34;docker.io&#34;] Useful shortcuts Add to ~/.bashrc:
alias deploy='podman-compose --podman-run-args=--replace up -d --pull --build --remove-orphans' alias undeploy='podman-compose down --remove-orphans' alias logs='podman-compose logs --follow --names' alias stack='podman-compose' Test in a new terminal or run source ~/.bashrc"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-12-25T00:00:00+00:00"><meta property="article:modified_time" content="2025-12-25T22:43:20+01:00"><meta property="article:tag" content="Podman"><meta property="article:tag" content="Docker"><meta property="article:tag" content="Ubuntu"><meta property="article:tag" content="Debian"><meta name=author content="knrdl"><link rel=stylesheet href=https://knrdl.github.io/styles.min.b1eb305989f01c7be31a7a19d4ab34ca470eddd06327253c7bcf3d1c5a41d28c.css integrity="sha256-seswWYnwHHvjGnoZ1Ks0ykcO3dBjJyU8e889HFpB0ow="></head><body><header><div class=site-header><span><a href=https://knrdl.github.io/ class=site-title>knrdlog</a>
</span><span><nav class=right-menu><span class=menu-item><a href=/tags/>tags</a></span>
<span class=menu-item><a href=https://github.com/knrdl target=_blank rel="noopener noreferrer">github</a></span>
<span class=menu-item><a href=/index.xml>rss</a></span></nav></span></div><div class=separator>================================================================================================================================================================</div></header><main><article><div class=post-header><h1>Minimal setup for a rootless Podman host</h1><time datetime=2025-12-25 class=pubdate>2025-12-25</time>
<span class=tags><a href=/tags/debian class=hashtag>debian</a>
<a href=/tags/docker class=hashtag>docker</a>
<a href=/tags/podman class=hashtag>podman</a>
<a href=/tags/ubuntu class=hashtag>ubuntu</a></span></div><h2 id=install-podman class=paragraph-header>Install Podman <a href=#install-podman></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo apt install podman podman-compose
</span></span></code></pre></div><p>Compose can be called as <code>podman-compose</code> with autocomplete.</p><h3 id=allow-binding-to-privileged-ports-1024 class=paragraph-header>Allow binding to privileged ports (&lt;1024) <a href=#allow-binding-to-privileged-ports-1024></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>echo</span> <span style=color:#f1fa8c>&#34;net.ipv4.ip_unprivileged_port_start=1&#34;</span> &gt; /etc/sysctl.d/100-podman.conf
</span></span><span style=display:flex><span>/usr/sbin/sysctl --system  <span style=color:#6272a4># apply setting</span>
</span></span></code></pre></div><h3 id=start-containers-after-reboot-without-user-login class=paragraph-header>Start containers after reboot without user login <a href=#start-containers-after-reboot-without-user-login></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>loginctl enable-linger <span style=color:#8be9fd;font-style:italic>$USER</span>
</span></span></code></pre></div><h3 id=pull-images-from-docker-hub-without-explicit-dockerio-prefix class=paragraph-header>Pull images from Docker Hub without explicit <code>docker.io</code> prefix <a href=#pull-images-from-docker-hub-without-explicit-dockerio-prefix></a></h3><p>Add to <code>~/.config/containers/registries.conf</code>:</p><pre tabindex=0><code>unqualified-search-registries = [&#34;docker.io&#34;]
</code></pre><h2 id=useful-shortcuts class=paragraph-header>Useful shortcuts <a href=#useful-shortcuts></a></h2><p>Add to <code>~/.bashrc</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>alias</span> <span style=color:#8be9fd;font-style:italic>deploy</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;podman-compose --podman-run-args=--replace up -d --pull --build --remove-orphans&#39;</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>alias</span> <span style=color:#8be9fd;font-style:italic>undeploy</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;podman-compose down --remove-orphans&#39;</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>alias</span> <span style=color:#8be9fd;font-style:italic>logs</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;podman-compose logs --follow --names&#39;</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>alias</span> <span style=color:#8be9fd;font-style:italic>stack</span><span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#39;podman-compose&#39;</span>
</span></span></code></pre></div><p>Test in a new terminal or run <code>source ~/.bashrc</code></p><h2 id=housekeeping class=paragraph-header>Housekeeping <a href=#housekeeping></a></h2><p>/etc/crontab:</p><pre tabindex=0><code>0    1  * * *	root	     apt-get -y update &amp;&amp; apt-get autoremove --purge -y
</code></pre><p>User-specific <code>crontab -e</code>:</p><pre tabindex=0><code>0   3  *   *   *     /home/container/update_all.sh
0   5  *   *   *     podman system prune --force
*/3 *  *   *   *     podman ps --filter health=unhealthy --format &#34;podman restart {{.ID}}&#34; | bash
</code></pre><h3 id=stack-updater-script-homecontainerupdate_allsh class=paragraph-header>Stack updater script <code>/home/container/update_all.sh</code>: <a href=#stack-updater-script-homecontainerupdate_allsh></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#ff79c6>#!/bin/bash
</span></span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>cd</span> /home/container
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>for</span> d in */; <span style=color:#ff79c6>do</span>
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>cd</span> <span style=color:#f1fa8c>&#34;</span><span style=color:#8be9fd;font-style:italic>$d</span><span style=color:#f1fa8c>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>echo</span> <span style=color:#f1fa8c>&#34;</span><span style=color:#8be9fd;font-style:italic>$d</span><span style=color:#f1fa8c>&#34;</span>
</span></span><span style=display:flex><span>    podman-compose --podman-run-args<span style=color:#ff79c6>=</span>--replace up -d --pull --build --remove-orphans
</span></span><span style=display:flex><span>    <span style=color:#8be9fd;font-style:italic>cd</span> ..
</span></span><span style=display:flex><span><span style=color:#ff79c6>done</span>
</span></span></code></pre></div><h3 id=auto-updater class=paragraph-header>Auto-Updater <a href=#auto-updater></a></h3><p>Alternatively, Podman&rsquo;s built-in auto-updater can be enabled with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo systemctl <span style=color:#8be9fd;font-style:italic>enable</span> --now podman-auto-update.timer
</span></span><span style=display:flex><span>podman auto-update --dry-run  <span style=color:#6272a4># test</span>
</span></span></code></pre></div><p>Containers needs to be marked as updatable via label.
However, it might not be sufficient to rebuild compose stacks that use <code>build:</code> instead of <code>image:</code> for services.</p><h2 id=test class=paragraph-header>Test <a href=#test></a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>podman run -it --rm -p80:80 nginx:alpine
</span></span></code></pre></div><h3 id=portainer class=paragraph-header>Portainer <a href=#portainer></a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>systemctl --user <span style=color:#8be9fd;font-style:italic>enable</span> --now podman.socket
</span></span><span style=display:flex><span>podman run -it --rm -p 9443:9443 --name portainer -v /run/user/1000/podman/podman.sock:/var/run/docker.sock portainer/portainer-ce
</span></span></code></pre></div><div class=comments><a href="https://github.com/knrdl/knrdl.github.io/issues/new?title=Minimal+setup+for+a+rootless+Podman+host" target=_blank rel="noopener noreferrer"><img src=https://knrdl.github.io/github.png alt="Github logo" style=filter:invert(.7) width=17 height=17>
<span>Feedback</span></a></div></article></main><hr><footer>Licensed under <a href=https://creativecommons.org/publicdomain/zero/1.0/ target=_blank rel='noopener norefferer'>CC0 1.0</a> |
<a href=https://gohugo.io target=_blank rel='noopener norefferer'>Hugo</a> theme inspired by <a href=https://github.com/vamc19 target=_blank rel='noopener norefferer'>vamc19</a> |
Hosted by <a href=https://pages.github.com target=_blank rel='noopener norefferer'>Github</a> (<a href=https://github.com/site/privacy target=_blank rel='noopener norefferer'>Privacy Policy</a>)</footer></body></html>